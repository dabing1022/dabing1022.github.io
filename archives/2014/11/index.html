<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2014/11 | HappyCoding:)ChildhoodAndy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。">
<meta property="og:type" content="website">
<meta property="og:title" content="HappyCoding:)ChildhoodAndy">
<meta property="og:url" content="dabing1022.github.io/archives/2014/11/index.html">
<meta property="og:site_name" content="HappyCoding:)ChildhoodAndy">
<meta property="og:description" content="思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HappyCoding:)ChildhoodAndy">
<meta name="twitter:description" content="思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。">
  
    <link rel="alternative" href="/atom.xml" title="HappyCoding:)ChildhoodAndy" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">ChildhoodAndy</a></h1>
		</hgroup>

		
		<p class="header-subtitle">思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。</p>
		
		
		<form><input type="text" class="search" placeholder=" Search..."></form>
				


		
			<div id="switch-btn" class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div id="switch-area" class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives/">所有文章</a></li>
				        
							<li><a href="/tags/">标签云</a></li>
				        
							<li><a href="/about/">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<ul class="social">
							
								<li id="Email"><a class="Email" target="_blank" href="/dabing1022@gmail.com" title="Email"></a></li>
					        
								<li id="GitHub"><a class="GitHub" target="_blank" href="http://www.github.com/dabing1022" title="GitHub"></a></li>
					        
								<li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
					        
								<li id="Twitter"><a class="Twitter" target="_blank" href="https://twitter.com/childhoodandy" title="Twitter"></a></li>
					        
								<li id="StackOverflow"><a class="StackOverflow" target="_blank" href="http://stackoverflow.com/users/1986621" title="StackOverflow"></a></li>
					        
						</ul>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/BMFont/" style="font-size: 10px;">BMFont</a> <a href="/tags/Bitmap-Font-Generator/" style="font-size: 10px;">Bitmap Font Generator</a> <a href="/tags/Box2D/" style="font-size: 15px;">Box2D</a> <a href="/tags/CCTableView/" style="font-size: 10px;">CCTableView</a> <a href="/tags/Chipmunk/" style="font-size: 17.5px;">Chipmunk</a> <a href="/tags/Chipmunk2D/" style="font-size: 10px;">Chipmunk2D</a> <a href="/tags/Cocoapods/" style="font-size: 17.5px;">Cocoapods</a> <a href="/tags/Cocoapods升级/" style="font-size: 10px;">Cocoapods升级</a> <a href="/tags/Cocos2d-iPhone/" style="font-size: 12.5px;">Cocos2d-iPhone</a> <a href="/tags/CoreData/" style="font-size: 17.5px;">CoreData</a> <a href="/tags/Glyph-Designer/" style="font-size: 10px;">Glyph Designer</a> <a href="/tags/HeartOfTheCity/" style="font-size: 15px;">HeartOfTheCity</a> <a href="/tags/ITC/" style="font-size: 10px;">ITC</a> <a href="/tags/Lua/" style="font-size: 15px;">Lua</a> <a href="/tags/MagicalRecord/" style="font-size: 17.5px;">MagicalRecord</a> <a href="/tags/PhysicsEngine/" style="font-size: 10px;">PhysicsEngine</a> <a href="/tags/PhysicsJointDistance/" style="font-size: 10px;">PhysicsJointDistance</a> <a href="/tags/Prelease/" style="font-size: 10px;">Prelease</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/RGBA8888/" style="font-size: 10px;">RGBA8888</a> <a href="/tags/ShoeBox/" style="font-size: 10px;">ShoeBox</a> <a href="/tags/TheNatureOfCode/" style="font-size: 10px;">TheNatureOfCode</a> <a href="/tags/UDID/" style="font-size: 10px;">UDID</a> <a href="/tags/UUID/" style="font-size: 10px;">UUID</a> <a href="/tags/WorldOfWarcraft/" style="font-size: 10px;">WorldOfWarcraft</a> <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/build/" style="font-size: 10px;">build</a> <a href="/tags/categorybitmask/" style="font-size: 10px;">categorybitmask</a> <a href="/tags/chainable/" style="font-size: 10px;">chainable</a> <a href="/tags/cocos2d/" style="font-size: 15px;">cocos2d</a> <a href="/tags/cocos2dx/" style="font-size: 15px;">cocos2dx</a> <a href="/tags/collision/" style="font-size: 12.5px;">collision</a> <a href="/tags/collisionBitmask/" style="font-size: 10px;">collisionBitmask</a> <a href="/tags/contactBitmask/" style="font-size: 10px;">contactBitmask</a> <a href="/tags/cpPinJont/" style="font-size: 10px;">cpPinJont</a> <a href="/tags/credentials/" style="font-size: 10px;">credentials</a> <a href="/tags/exporter/" style="font-size: 10px;">exporter</a> <a href="/tags/filter/" style="font-size: 10px;">filter</a> <a href="/tags/focusbooster/" style="font-size: 10px;">focusbooster</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/iPhone/" style="font-size: 10px;">iPhone</a> <a href="/tags/ios/" style="font-size: 12.5px;">ios</a> <a href="/tags/ios模拟器/" style="font-size: 10px;">ios模拟器</a> <a href="/tags/ipad/" style="font-size: 10px;">ipad</a> <a href="/tags/leak/" style="font-size: 10px;">leak</a> <a href="/tags/libLua-a/" style="font-size: 10px;">libLua.a</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/objective-c/" style="font-size: 10px;">objective-c</a> <a href="/tags/performselector/" style="font-size: 10px;">performselector</a> <a href="/tags/physicseditor/" style="font-size: 10px;">physicseditor</a> <a href="/tags/pod/" style="font-size: 10px;">pod</a> <a href="/tags/push/" style="font-size: 10px;">push</a> <a href="/tags/query/" style="font-size: 10px;">query</a> <a href="/tags/quick/" style="font-size: 12.5px;">quick</a> <a href="/tags/quick-cocos2dx/" style="font-size: 10px;">quick-cocos2dx</a> <a href="/tags/quick-x/" style="font-size: 10px;">quick-x</a> <a href="/tags/remove/" style="font-size: 10px;">remove</a> <a href="/tags/replace/" style="font-size: 10px;">replace</a> <a href="/tags/scene/" style="font-size: 10px;">scene</a> <a href="/tags/scrapy/" style="font-size: 10px;">scrapy</a> <a href="/tags/search/" style="font-size: 10px;">search</a> <a href="/tags/statemachine/" style="font-size: 10px;">statemachine</a> <a href="/tags/syntax/" style="font-size: 10px;">syntax</a> <a href="/tags/table/" style="font-size: 10px;">table</a> <a href="/tags/tolua/" style="font-size: 10px;">tolua</a> <a href="/tags/v1-1-0/" style="font-size: 10px;">v1.1.0</a> <a href="/tags/venture-partners/" style="font-size: 10px;">venture-partners</a> <a href="/tags/warning/" style="font-size: 10px;">warning</a> <a href="/tags/wax/" style="font-size: 10px;">wax</a> <a href="/tags/中文/" style="font-size: 10px;">中文</a> <a href="/tags/事件流/" style="font-size: 10px;">事件流</a> <a href="/tags/位图字体/" style="font-size: 10px;">位图字体</a> <a href="/tags/创业/" style="font-size: 12.5px;">创业</a> <a href="/tags/删除/" style="font-size: 12.5px;">删除</a> <a href="/tags/发布/" style="font-size: 10px;">发布</a> <a href="/tags/吞噬/" style="font-size: 10px;">吞噬</a> <a href="/tags/多重继承/" style="font-size: 10px;">多重继承</a> <a href="/tags/心城/" style="font-size: 20px;">心城</a> <a href="/tags/情境/" style="font-size: 10px;">情境</a> <a href="/tags/情感/" style="font-size: 15px;">情感</a> <a href="/tags/拒绝/" style="font-size: 10px;">拒绝</a> <a href="/tags/搜索引擎/" style="font-size: 10px;">搜索引擎</a> <a href="/tags/数据采集/" style="font-size: 10px;">数据采集</a> <a href="/tags/数组/" style="font-size: 10px;">数组</a> <a href="/tags/概念图/" style="font-size: 10px;">概念图</a> <a href="/tags/添加图片/" style="font-size: 10px;">添加图片</a> <a href="/tags/爬虫/" style="font-size: 12.5px;">爬虫</a> <a href="/tags/版本/" style="font-size: 10px;">版本</a> <a href="/tags/物理引擎/" style="font-size: 10px;">物理引擎</a> <a href="/tags/状态机/" style="font-size: 10px;">状态机</a> <a href="/tags/用户/" style="font-size: 10px;">用户</a> <a href="/tags/番茄工作法/" style="font-size: 10px;">番茄工作法</a> <a href="/tags/碰撞查询/" style="font-size: 10px;">碰撞查询</a> <a href="/tags/碰撞过滤/" style="font-size: 10px;">碰撞过滤</a> <a href="/tags/移除/" style="font-size: 10px;">移除</a> <a href="/tags/纹理/" style="font-size: 10px;">纹理</a> <a href="/tags/编程模拟自然系统/" style="font-size: 10px;">编程模拟自然系统</a> <a href="/tags/联想词/" style="font-size: 10px;">联想词</a> <a href="/tags/触摸/" style="font-size: 10px;">触摸</a> <a href="/tags/设备信息/" style="font-size: 10px;">设备信息</a> <a href="/tags/账户密码/" style="font-size: 10px;">账户密码</a> <a href="/tags/距离关节/" style="font-size: 10px;">距离关节</a> <a href="/tags/输入/" style="font-size: 10px;">输入</a> <a href="/tags/链式语法/" style="font-size: 10px;">链式语法</a> <a href="/tags/销关节/" style="font-size: 10px;">销关节</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://zengrong.net/">曾嵘</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://post.justbilt.com/">justblit</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://yulingtianxia.com">玉令天下</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://mokai.github.io">mokai</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">热爱编码，希望家人幸福安康</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">ChildhoodAndy</a></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<a href="/" class="profilepic">
				<img lazy-src="/img/avatar.png" class="js-avatar">
			</a>
			<hgroup>
			  <h1 class="header-author"><a href="/" title="回到主页">ChildhoodAndy</a></h1>
			</hgroup>
			
			<p class="header-subtitle">思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives/">所有文章</a></li>
		        
					<li><a href="/tags/">标签云</a></li>
		        
					<li><a href="/about/">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
						<ul class="social">
							
								<li id="Email"><a class="Email" target="_blank" href="/dabing1022@gmail.com" title="Email"></a></li>
					        
								<li id="GitHub"><a class="GitHub" target="_blank" href="http://www.github.com/dabing1022" title="GitHub"></a></li>
					        
								<li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
					        
								<li id="Twitter"><a class="Twitter" target="_blank" href="https://twitter.com/childhoodandy" title="Twitter"></a></li>
					        
								<li id="StackOverflow"><a class="StackOverflow" target="_blank" href="http://stackoverflow.com/users/1986621" title="StackOverflow"></a></li>
					        
						</ul>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-walking-in-the-dark" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/11/08/walking-in-the-dark/" class="article-date">
  	<time datetime="2014-11-07T22:29:00.000Z" itemprop="datePublished">11月 8 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/08/walking-in-the-dark/">行走在黑暗中</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>2014年11月08号，心城v1.1.0通过了苹果的审核。如果阅读过前面<a href="http://childhood.logdown.com/posts/238638/110-today-submitted-for-review" target="_blank" rel="external">心城1.1.0今天提交审核了</a>的朋友们会发现，时间俨然过了2周多。期间发生了什么事情？正常的Waiting For Review进入InReview大概1周差不多，这次怎么两周多了？</p>
<p>被拒了一次。</p>
<p>来看下被拒的原因吧，希望后面的朋友别和我一样。</p>
<h1 id="1-问题描述">1.问题描述</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Reasons</span><br><span class="line">2.23: Apps must follow the iOS Data Storage Guidelines or they will be rejected</span><br><span class="line">3.3: Apps with names, descriptions, screenshots, or previews not relevant to the content and functionality of the App will be rejected</span><br><span class="line">----- 2.23 -----</span><br><span class="line"></span><br><span class="line">We found that your app does not follow the iOS Data Storage Guidelines, which is required per the App Store Review Guidelines.</span><br><span class="line"></span><br><span class="line">In particular, we found that on launch and/or content download, your app stores 2.04MB. To check how much data your app is storing:</span><br><span class="line"></span><br><span class="line">- Install and launch your app</span><br><span class="line">- Go to Settings &gt; iCloud &gt; Storage &amp; Backup &gt; Manage Storage</span><br><span class="line">- If necessary, tap "Show all apps"</span><br><span class="line">- Check your app's storage</span><br><span class="line"></span><br><span class="line">The iOS Data Storage Guidelines indicate that only content that the user creates using your app, e.g., documents, new files, edits, etc., should be backed up by iCloud.</span><br><span class="line"></span><br><span class="line">Temporary files used by your app should only be stored in the /tmp directory; please remember to delete the files stored in this location when the user exits the app.</span><br><span class="line"></span><br><span class="line">Data that can be recreated but must persist for proper functioning of your app - or because customers expect it to be available for offline use - should be marked with the "do not back up" attribute. For NSURL objects, add the NSURLIsExcludedFromBackupKey attribute to prevent the corresponding file from being backed up. For CFURLRef objects, use the corresponding kCFURLIsExcludedFromBackupKey attribute.</span><br><span class="line"></span><br><span class="line">For more information, please see Technical Q&amp;A 1719: How do I prevent files from being backed up to iCloud and iTunes?.</span><br><span class="line"></span><br><span class="line">It is necessary to revise your app to meet the requirements of the iOS Data Storage Guidelines.</span><br><span class="line"></span><br><span class="line">----- 3.3 -----</span><br><span class="line"></span><br><span class="line">In addition, your marketing screenshots do not sufficiently reflect the app in use, which does not give the user an accurate understanding of what the app does, as required by the App Store Review Guidelines.</span><br><span class="line"></span><br><span class="line">We’ve attached the relevant screenshot(s) for your reference.</span><br><span class="line"></span><br><span class="line">It would be appropriate to revise your screenshots to demonstrate the app functionality in use.</span><br><span class="line"></span><br><span class="line">If your iTunes Connect Application State is Rejected, a new binary will be required. Make the desired metadata changes when you upload the new binary.</span><br><span class="line"></span><br><span class="line">For discrete code-level questions, you may wish to consult with Apple Developer Technical Support. When the DTS engineer follows up with you, please be ready to provide:</span><br><span class="line"></span><br><span class="line">- complete details of your rejection issue(s)</span><br><span class="line">- screenshots</span><br><span class="line">- steps to reproduce the issue(s)</span><br><span class="line">- symbolicated crash logs - if your issue results in a crash log</span><br></pre></td></tr></table></figure>
<p>一共两个原因。<br>分别对应苹果审核规则的2.23和3.3规则。</p>
<h1 id="2-先说3-3_元数据问题">2.先说3.3 元数据问题</h1><p>截图不够丰富，表达不了应用的功能，增加了3张图片解决问题。</p>
<h1 id="3-再谈2-23_数据存储问题">3.再谈2.23 数据存储问题</h1><p>心城将用户拍照以及头像设置的图片以及用户的录音文件都保存在了沙箱Documents文件夹，MagicalRecord用的数据库文件默认存放在了<code>Library/Application Support</code>目录下。</p>
<p>我举个例子来说明：</p>
<h2 id=""><img src="http://childhoodgamedev.qiniudn.com/xincheng_QQ20141108-1.png" alt=""></h2><p>Documents下的文件是会被 iCloud 自动备份的，苹果的测试人员发现，他们拍了一些照片，录制一些音频，然后退出应用，同步iCloud发现数据有2.04M，很明显，照片和音频数据以及数据库文件（存放在Library下的ApplicationSupport下，同样会被iCloud自动同步）是造成这2.04M的罪魁祸首，所以被拒。</p>
<p>究其原因是我<em>存储文件的位置不对或者说是规则不对</em>造成的。为了避免被 iCloud 同步，需要对这些文件进行“不备份标记”。将文件夹标记为不备份，那么其子文件和子文件夹都不会被备份。这里还不敢对 Documents 标记不备份，那样“太过分了”，毕竟还有其他数据和文稿需要备份。对Documents下的不需要的文件夹进行标记即可。</p>
<p>和一个朋友交流中，他提到了他以前犯过的一个错误，他的应用在访问网络时，把一些图片存放在了 Documents 文件夹里面了，也是导致被拒，这些图片应该视情况放在tmp或者cache里面。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//沙盒Documents目录路径</span></span><br><span class="line"> <span class="preprocessor">#<span class="keyword">define</span> DOC_PATH ([NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:<span class="number">0</span>])</span></span><br><span class="line"><span class="comment">//沙盒Cache目录路径</span></span><br><span class="line"> <span class="preprocessor">#<span class="keyword">define</span> CACHE_PATH ([NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:<span class="number">0</span>])</span></span><br><span class="line"><span class="comment">//沙盒Library目录路径</span></span><br><span class="line"> <span class="preprocessor">#<span class="keyword">define</span> LIB_PATH ([NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:<span class="number">0</span>])</span></span><br><span class="line"><span class="comment">//沙盒Temp目录路径</span></span><br><span class="line"> <span class="preprocessor">#<span class="keyword">define</span> TEMP_PATH (NSTemporaryDirectory())</span></span><br><span class="line"> <span class="comment">// app data directory name</span></span><br><span class="line"> <span class="preprocessor">#<span class="keyword">define</span> APP_DATA_PHOTOS_DIR_NAME     @<span class="string">"photos"</span></span></span><br><span class="line"> <span class="preprocessor">#<span class="keyword">define</span> APP_DATA_AUDIOS_DIR_NAME     @<span class="string">"audios"</span></span></span><br><span class="line"> <span class="preprocessor">#<span class="keyword">define</span> APP_DATA_AVATARS_DIR_NAME    @<span class="string">"avatars"</span></span></span><br><span class="line"></span><br><span class="line">-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//.....</span></span><br><span class="line">  [self addSkipBackup];</span><br><span class="line">  <span class="comment">//.....</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)addSkipBackup</span><br><span class="line">&#123;</span><br><span class="line">  NSString* photoDirPath = [DOC_PATH stringByAppendingPathComponent:APP_DATA_PHOTOS_DIR_NAME];</span><br><span class="line">  NSString* audioDirPath = [DOC_PATH stringByAppendingPathComponent:APP_DATA_AUDIOS_DIR_NAME];</span><br><span class="line">  NSString* avatarDirPath = [DOC_PATH stringByAppendingPathComponent:APP_DATA_AVATARS_DIR_NAME];</span><br><span class="line"></span><br><span class="line">  [self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:photoDirPath]];</span><br><span class="line">  [self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:audioDirPath]];</span><br><span class="line">  [self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:avatarDirPath]];</span><br><span class="line">  [self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:[NSPersistentStore MR_applicationStorageDirectory]]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL</span><br><span class="line">&#123;</span><br><span class="line">    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);</span><br><span class="line"></span><br><span class="line">    NSError *error = nil;</span><br><span class="line">    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]</span><br><span class="line">                                  forKey: NSURLIsExcludedFromBackupKey error: &amp;error];</span><br><span class="line">    <span class="keyword">if</span>(!success)&#123;</span><br><span class="line">        NSLog(@<span class="string">"Error excluding %@ from backup %@"</span>, [URL lastPathComponent], error);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> success;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改之后，重新提交，漫长的WaitingForReview又重新开始。今天进入了InReview后顺利通过上架。</p>
<h1 id="4-杂说">4.杂说</h1><p>在等待的期间，v1.2.0也在另外的分支开发着。今天1.1.0上架后，v1.2.0 也做了提交。</p>
<p>v1.2.0的改动<br>1.崭新的UI界面；<br>2.增加密码锁保护隐私；<br>3.消除了5连拍时存在的闪退隐患。</p>
<p>襁褓中的心城，并不完美也并不强大，虽然收到了负面的反馈，但不妨碍我把TA坚持做下去做好的决心。</p>
<p>行走在黑暗中，也许某天，会看到光明。</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/创业/">创业</a>
	</div>


      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HeartOfTheCity/">HeartOfTheCity</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/v1-1-0/">v1.1.0</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/心城/">心城</a></li></ul>
	</div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2015 ChildhoodAndy
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的静态博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减双栏 Hexo 博客主题">Yelee</a> by MOxFIVE
        </div>
    </div>
    <div class="visit">
      <span id="busuanzi_container_site_pv" style='display:none'>
        <span id="site-visit" >本站到访数: 
        <span id="busuanzi_value_site_uv"></span>
        </span>
      </span>
      <span id="busuanzi_container_page_pv" style='display:none'>
        <span id="page-visit">, 本页阅读量: 
        <span id="busuanzi_value_page_pv"></span>
        </span>
      </span>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: false,
		isArchive: true,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>

<script type="text/javascript">
  var backgroundList = ["url(/background/bg-1.jpg)", "url(/background/bg-2.jpg)","url(/background/bg-3.jpg)","url(/background/bg-4.jpg)","url(/background/bg-5.jpg)"];
  var background = Math.floor(Math.random() * backgroundList.length);
  $("body").css({"background": backgroundList[background], "background-attachment": "fixed", "background-size": "cover"});
</script>




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
<a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
<a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<button class="hide-labels">TAG 开关</button>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js">
</script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    $(".article-info").toggle(200);
  });
});
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>