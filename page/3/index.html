<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="HappyCoding:)" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/uploads/avatar.png?v=5.0.1" />






<meta name="description" content="思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。">
<meta property="og:type" content="website">
<meta property="og:title" content="HappyCoding:)">
<meta property="og:url" content="dabing1022.github.io/page/3/index.html">
<meta property="og:site_name" content="HappyCoding:)">
<meta property="og:description" content="思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HappyCoding:)">
<meta name="twitter:description" content="思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: "post",
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="dabing1022.github.io/page/3/"/>

  <title> HappyCoding:) </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  

  <div class="container one-collumn  
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">HappyCoding:)</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/21/easy-magicalrecord-03/" itemprop="url">
                  深入浅出MagicalRecord-03
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-21T08:26:00+08:00" content="Jul 21 2014">
              Jul 21 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ios/" itemprop="url" rel="index">
                    <span itemprop="name">ios</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/21/easy-magicalrecord-03/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/21/easy-magicalrecord-03/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们接着上一篇 <a href="http://childhood.logdown.com/posts/209933/easy-magicalrecord-02" target="_blank" rel="external">深入浅出MagicalRecord-02</a>。</p>
<p>这节我们来一起学习下MagicalRecord对数据的<em>增删改查</em>，内容主要来自于 <a href="https://github.com/magicalpanda/MagicalRecord/blob/develop/Docs/Fetching.md" target="_blank" rel="external">MagicalRecord的github资料</a>。</p>
<h1 id="1-_增-创建实体">1. 增-创建实体</h1><figure class="highlight js"><figcaption><span>创建实体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person *myPerson = [Person MR_createEntity];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>指定创建的上下文中创建实体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person *myPerson = [Person MR_createInContext:otherContext];</span><br></pre></td></tr></table></figure>
<h1 id="2-_删-删除实体">2. 删-删除实体</h1><figure class="highlight js"><figcaption><span>删除一个实体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[myPerson MR_deleteEntity];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>删除特定上下文中的实体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[myPerson MR_deleteInContext:otherContext];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>删除所有实体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Person MR_truncateAll];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>删除特定上下文中的所有实体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Person MR_truncateAllInContext:otherContext];</span><br></pre></td></tr></table></figure>
<h1 id="3-_改-修改实体">3. 改-修改实体</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person *person = ...;</span><br><span class="line">person.lastname = <span class="string">"xxx"</span>;</span><br></pre></td></tr></table></figure>
<h1 id="4-_查-查询实体">4. 查-查询实体</h1><p>查询的结果通常会返回一个<code>NSArray</code>结果。</p>
<h2 id="a)_基本查询">a) 基本查询</h2><figure class="highlight js"><figcaption><span>从持久化存储（PersistantStore）中查询出所有的Person实体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSArray *people = [Person MR_findAll];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>查询出所有的Person实体并按照 lastName 升序（ascending）排列</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSArray *peopleSorted = [Person MR_findAllSortedBy:@<span class="string">"lastName"</span> ascending:YES];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>查询出所有的Person实体并按照 lastName 和 firstName 升序（ascending）排列</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSArray *peopleSorted = [Person MR_findAllSortedBy:@<span class="string">"lastName,firstName"</span> ascending:YES];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>查询出所有的Person实体并按照 lastName 降序，firstName 升序（ascending）排列</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSArray *peopleSorted = [Person MR_findAllSortedBy:@<span class="string">"lastName:NO,firstName"</span> ascending:YES];</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line">NSArray *peopleSorted = [Person MR_findAllSortedBy:@<span class="string">"lastName,firstName:YES"</span> ascending:NO];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>查询出所有的Person实体 firstName 为 Forrest 的实体</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person *person = [Person MR_findFirstByAttribute:@<span class="string">"firstName"</span> withValue:@<span class="string">"Forrest"</span>];</span><br></pre></td></tr></table></figure>
<h2 id="b)_高级查询">b) 高级查询</h2><p>使用<code>NSPredicate</code>来实现高级查询。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSPredicate *peopleFilter = [NSPredicate predicateWithFormat:@<span class="string">"department IN %@"</span>, @[dept1, dept2]];</span><br><span class="line">NSArray *people = [Person MR_findAllWithPredicate:peopleFilter];</span><br></pre></td></tr></table></figure></p>
<h2 id="c)返回_NSFetchRequest">c)返回 NSFetchRequest</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSPredicate *peopleFilter = [NSPredicate predicateWithFormat:@<span class="string">"department IN %@"</span>, departments];</span><br><span class="line">NSFetchRequest *people = [Person MR_requestAllWithPredicate:peopleFilter];</span><br></pre></td></tr></table></figure>
<h2 id="d)自定义_NSFetchRequest">d)自定义 NSFetchRequest</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NSPredicate *peopleFilter = [NSPredicate predicateWithFormat:@<span class="string">"department IN %@"</span>, departments];</span><br><span class="line"></span><br><span class="line">NSFetchRequest *peopleRequest = [Person MR_requestAllWithPredicate:peopleFilter];</span><br><span class="line">[peopleRequest setReturnsDistinctResults:NO];</span><br><span class="line">[peopleRequest setReturnPropertiesNamed:@[@<span class="string">"firstName"</span>, @<span class="string">"lastName"</span>]];</span><br><span class="line"></span><br><span class="line">NSArray *people = [Person MR_executeFetchRequest:peopleRequest];</span><br></pre></td></tr></table></figure>
<h2 id="e)查询实体的个数">e)查询实体的个数</h2><figure class="highlight js"><figcaption><span>返回的是 NSNumber 类型</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSNumber *count = [Person MR_numberOfEntities];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>基于NSPredicate查询条件过滤后的实体个数</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSNumber *count = [Person MR_numberOfEntitiesWithPredicate:...];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>返回的是 NSUInteger 类型</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ (NSUInteger) MR_countOfEntities;</span><br><span class="line">+ (NSUInteger) MR_countOfEntitiesWithContext:(NSManagedObjectContext *)context;</span><br><span class="line">+ (NSUInteger) MR_countOfEntitiesWithPredicate:(NSPredicate *)searchFilter;</span><br><span class="line">+ (NSUInteger) MR_countOfEntitiesWithPredicate:(NSPredicate *)searchFilter inContext:(NSManagedObjectContext *)</span><br></pre></td></tr></table></figure>
<h2 id="f)合计操作">f)合计操作</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSInteger totalFat = [[CTFoodDiaryEntry MR_aggregateOperation:@<span class="string">"sum:"</span> onAttribute:@<span class="string">"fatCalories"</span> withPredicate:predicate] integerValue];</span><br><span class="line"></span><br><span class="line">NSInteger fattest  = [[CTFoodDiaryEntry MR_aggregateOperation:@<span class="string">"max:"</span> onAttribute:@<span class="string">"fatCalories"</span> withPredicate:predicate] integerValue];</span><br><span class="line"></span><br><span class="line">NSArray *caloriesByMonth = [CTFoodDiaryEntry MR_aggregateOperation:@<span class="string">"sum:"</span> onAttribute:@<span class="string">"fatCalories"</span> withPredicate:predicate groupBy:@<span class="string">"month"</span>];</span><br></pre></td></tr></table></figure>
<h2 id="g)从指定上下文中查询">g)从指定上下文中查询</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSArray *peopleFromAnotherContext = [Person MR_findAllInContext:someOtherContext];</span><br><span class="line"></span><br><span class="line">Person *personFromContext = [Person MR_findFirstByAttribute:@<span class="string">"lastName"</span> withValue:@<span class="string">"Gump"</span> inContext:someOtherContext];</span><br><span class="line"></span><br><span class="line">NSUInteger count = [Person MR_numberOfEntitiesWithContext:someOtherContext];</span><br></pre></td></tr></table></figure>
<center>下一篇：<a href="http://childhood.logdown.com/posts/211076/easy-magicalrecord-04" target="_blank" rel="external">深入浅出MagicalRecord-04</a></center>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/19/venture-partners/" itemprop="url">
                  为什么在创业时我选择了从游戏开发转向应用开发
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-19T02:05:00+08:00" content="Jul 19 2014">
              Jul 19 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/创业/" itemprop="url" rel="index">
                    <span itemprop="name">创业</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/19/venture-partners/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/19/venture-partners/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2012年3月份的时候，当我终于把欠大学3年学费还掉拿到毕业证后，我离开了北京来到了上海。离开了众享乐学教育，离开了可爱的同事们，离开了好哥们，还好上海还有个铁哥们在。</p>
<p>来到上海，第一件事就是换电话卡了。在我换号后，短信和qq通知了家人和朋友们，便开始了我的找工作之旅。大学的专业是计算机，那时候对计算机编程却一点也不感冒，偏要跷课去自学动画，毕业后3年都在从事动画相关的工作。来到上海后，我仔细思考了下我自身的状况，发现并不适合从事动画。</p>
<p>何去何从？我思考了很久。</p>
<p>我还是回到了大学的专业，起码除下动画，还有游戏开发是我一直想探寻的宝地。在从事动画的时候，大部分情况在flash下工作，所以也接触到了flash的当家语言actionscript。所以在网投简历的时候，我定了个方向就是actionscript的游戏开发。而2012年的时候，actionscript游戏开发，当属页游最火了。经过一些面试后，我最后被上海视速录用。</p>
<p>刚进公司，接手的是一个棋牌游戏。很快经过几个月的工作学习，我重新拾起了程序。2013年初的时候开始了一个手游项目，集棋牌游戏+卡牌游戏的玩法于一体的《妙手牛牛》。2013年中下旬的时候游戏基本开发完毕，当然中途我们遇到了很多问题。产品经理对产品质量包括UI、游戏玩法要求很严格，中途的美术曾经大换血一次，设计也推翻了很多。但最终还是完成了。</p>
<p>公司的主营业务是视频聊天，游戏是正在拓展的业务。但游戏开发时，公司的视频应用也在同步开发，包括了ios和android版本。游戏开发结束时，ios版本基本也快结束了。公司要大力推广视频应用，游戏方面推广投入有风险，所以就搁置了。从那时候情况看，在视速公司体制下，从事游戏开发到上线推广运营，实话说，并不是很顺利的事情。</p>
<p>于是，产品经理也就是现在我的合伙人（我叫他一哥，因为名字中带“意”），2013年11月份时带着我离开了公司，两个美术和1个策划朋友并没有加入到我们的创业队伍。</p>
<p>小时候玩红白机、街机的童年时光是让我坚持游戏开发的很大理由，也是我跟随一哥出来创业的一个很“幼稚的理由”。我完全可以选择不来创业，找公司继续打工着。但也许骨子里有一份不安分的心，是我这么做的另外一个原因。大四的时候就和几个朋友开动画工作室，算是很不成熟的创业，不过最后因为资金问题没能继续做下去。</p>
<p>一哥和我从公司离职后，便在朋友的公司找了两个工位，这样基本持续了4个月左右。在这4个月中，我们一共开发出了两款游戏，一个是垃圾回收方面的公益游戏，另外一个是《三国纵》，我们吃饭讨论，走路讨论，在家视频语音讨论游戏的创意和玩法，最终游戏的原型基本成熟完成。为什么说是原型，因为美术我们没有任何投入。</p>
<center><strong>游戏原型片段</strong></center><br><center><iframe height="498" width="510" src="http://player.youku.com/embed/XNzQ4ODAzMjI4" frameborder="0" allowfullscreen></iframe></center>

<p>在游戏圈创业，才深知这个行业的浮躁，才深知这个行业的浮浮沉沉。新闻报道中充斥着某某团队某某作品大卖，团队被几百万收购的新闻…，这些总是或多或少会对自己形成心里冲击。有正面的，也有负面的。而我们两个人，我自己的积蓄也逐渐花光，一哥保证了我的基本生活。寻找投资、寻找美术合作是我们当时谈的较多的话题。但事情总是没有那么顺利，我们遇到了很多障碍，而资金就是最大的问题。我们是想做精品游戏，而对美术有着较高的要求，为了寻找合适的美术，花费了不少时间。而寻找投资，更是没那么容易。</p>
<p>最后我们选择了放弃。为何就这么轻易放弃？我很不甘心。也许是游戏的玩法并没有预期中的那么惊艳，也许是料想到游戏上线后也只是大海中的苍茫一粟，反响平平，也许寻找美术、投资时遇到了很多阻碍，总是有很多理由来说明这个问题。也许是我们真的不行吧。</p>
<p>Maybe，我淡然一笑。凌晨3点，我瞪着屏幕，点燃了从哥们那拿的一根烟。我做好了散伙的打算。</p>
<p>“有个想法我从两年前就开始酝酿，之前做过一个网页版本，现在想法比之前的更加成熟点，我想做成应用。” </p>
<p>我俩在路上走着，边走边聊着。当我听到要转做应用，我有点崩溃掉了。我讨厌应用开发，对应用开发有着相当大抵触的心理。你可能会问我为什么，一个陌生的领域，意味又要开始学习大量的知识，而我还一直幻想着自己仍在游戏开发领域坚持着。你可能会笑了，你作为程序员，不学技术，小心被淘汰！游戏开发中还有很多非常有趣的领域需要探寻，比如游戏人工智能，我舍不得抛下这些。我思想激烈的斗争着，如果转做应用，可能后面我不怎么会接触游戏开发领域方面的东西了，那真是个遗憾的事情。</p>
<p>后面随着聊天的深入，一哥给我介绍了这个app的构想，也就是我现在正在做的项目-《心城》。聊天中途，一哥对于这个应用的某些想法和亮点给了我一些触动，”我很想把这个应用开发出来，让人们都用上她！“我当时心中就萌生了这个决心。</p>
<p>微信、微博、秘密等等这些app占据着社交网络的市场，但我仍然觉得这些并不能管理好我们内心的情感。纷乱嘈杂的过量信息，浮于面子工程的一些文字，并不能让我们活的更好。科技的发展，社交网络的流行拉近了我们的空间距离，却没有拉近我们彼此内心的距离。《心城》，就是我们的的情感管理专家，让我们能更有效去现实社交。情感记录，广场心声，情感数据可视化这些都是我们将要深度挖掘的点。在《心城》，一切围绕着我们关爱的人，以他们为核心来构建应用的整个情感基石。</p>
<p>《心城》应用的价值观和TA未来诞生后的功用性，让我认识到我必须要专心下来学习开发应用，我坚信应用开发并不难。动画的自学，游戏开发的自学，让我对我自己的自学能力抱有信心。为了能让《心城》未来的无与伦比，我必须静下心来做好。</p>
<p>我是否能找到和我一样认同这款产品并当成事业来做的志同道合的伙伴？心城的情感记录特性，会在某个阶段催生TA的赢利点，未来的商业盈利不是问题，我不认为这是现阶段要注意的问题。就如同《知乎》一样，我认为知乎团队在做着非常伟大的事情，虽然这是源自quora的想法。现阶段就是找到对的人，在对的时间，做对的事情。你，是否有兴趣了解？</p>
<h2 id="创业项目："><i class="icon-heart"> 创业项目：</i></h2><ul>
<li>名称：心城</li>
<li>概念：心城是创新的APP产品，它帮助用户利用移动设备创建一个广义“心上人”的集合，并随时随地记录与这些人有关的情感活动。心诚是我们的的情感管理专家，让我们能更有效去现实社交。你可以暂时将它理解为一个情感方面的通讯录和日记本。心城普遍适合于各种年龄和性别的智能手机用户。我们将基于用户所记录的情感活动推出有针对性的服务，比如撮合互相暗恋者，集体祈福，以及定制礼物等。</li>
</ul>
<h2 id="目前状况："><i class="icon-coffee"> 目前状况：</i></h2><ul>
<li>产品：概念形态已经定位，产品ios开发进行中</li>
<li>投资：已有若干投资人有投资意向</li>
</ul>
<h2 id="地点：上海"><i class="icon-map-marker"> 地点：上海</i></h2><h2 id="诚邀伙伴："><i class="icon-user"> 诚邀伙伴：</i></h2><ul>
<li>技术合伙人（推荐或者自荐，成功则奖励 5000 RMB）</li>
<li>IOS开发（推荐或者自荐，成功则奖励一个ipad mini）</li>
</ul>
<h2 id="详情联系："><i class="icon-envelope-alt"> 详情联系：</i></h2><ul>
<li>QQ: 804928112</li>
<li>EMAIL: dabing@qioji.com</li>
<li><a href="http://qioji.com/" target="_blank" rel="external">产品的心声</a></li>
</ul>
<p>路过看这篇博文的朋友，如果你们有这方面的人脉，非常期待能够得到你们的推荐，自荐也欢迎！</p>
<p>也许正是你们不经意的推荐，会给与我们一个坚实的团队，打磨出一个动人的无与伦比的产品！</p>
<p>我们坚信且一路前行！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/17/scrapy-crawling-logdown-blog-related-data/" itemprop="url">
                  Scrapy抓取Logdown博文相关数据
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-17T15:11:00+08:00" content="Jul 17 2014">
              Jul 17 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/17/scrapy-crawling-logdown-blog-related-data/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/17/scrapy-crawling-logdown-blog-related-data/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <center><img src="http://childhoodgamedev.qiniudn.com/scrapy_LogdownBlogSpider.png"></center>

<blockquote>
<p><strong>前言</strong><br>业余时间在接触 python，从兴趣点着手是个不错的办法。而爬虫正是我感兴趣的一个方向。我根据 <a href="http://blog.csdn.net/u012150179" target="_blank" rel="external">younghz</a> 的 Scrapy 教程一步一步来，试着将 Logdown 的博文相关数据抓去下来，作为练手之用，这里做个记录。</p>
</blockquote>
<h1 id="工具：Scrapy"><i class="icon-legal"> 工具：<a href="https://github.com/scrapy/scrapy" target="_blank" rel="external">Scrapy</a></i></h1><h1 id="Logdown博文相关数据"><i class="icon-filter"> Logdown博文相关数据</i></h1><p>这里暂时包括如下4个数据：</p>
<ul>
<li>博文名称 article_name</li>
<li>博文网址 article_url</li>
<li>博文日期 article_time</li>
<li>博文标签 article_tags</li>
</ul>
<h1 id="Let’s_Go!"><i class="icon-edit"> Let’s Go!</i></h1><h2 id="1-_创建project">1. 创建project</h2><figure class="highlight python"><figcaption><span>命令行cd到某个目录，然后运行如下命令</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject LogdownBlog</span><br></pre></td></tr></table></figure>
<h2 id="2-_items-py的编写">2. items.py的编写</h2><figure class="highlight python"><figcaption><span>items.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define here the models for your scraped items</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># See documentation in:</span></span><br><span class="line"><span class="comment"># http://doc.scrapy.org/en/latest/topics/items.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LogdownblogspiderItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    article_name = scrapy.Field()</span><br><span class="line">    article_url = scrapy.Field()</span><br><span class="line">    article_time = scrapy.Field()</span><br><span class="line">    article_tags = scrapy.Field()</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">```    </span><br><span class="line"><span class="comment">## 3. pipelines.py的编写</span></span><br><span class="line"></span><br><span class="line">```python pipelines.py</span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define your item pipelines here</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Don't forget to add your pipeline to the ITEM_PIPELINES setting</span></span><br><span class="line"><span class="comment"># See: http://doc.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LogdownblogspiderPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.file = codecs.open(<span class="string">'LogdownBlogArticles.json'</span>, mode = <span class="string">'w'</span>, encoding = <span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">		line = json.dumps(dict(item)) + <span class="string">'\n'</span></span><br><span class="line">		self.file.write(line.decode(<span class="string">'unicode_escape'</span>))</span><br><span class="line">		<span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p>将item通过管道输出到文件<code>LogdownBlogArticles.json</code>中，模式为<code>w</code>，用json形式覆盖写入，编码为<code>utf-8</code>编码。</p>
<h2 id="4-_settings-py的编写">4. settings.py的编写</h2><figure class="highlight python"><figcaption><span>settings.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BOT_NAME = <span class="string">'LogdownBlog'</span></span><br><span class="line"></span><br><span class="line">SPIDER_MODULES = [<span class="string">'LogdownBlog.spiders'</span>]</span><br><span class="line">NEWSPIDER_MODULE = <span class="string">'LogdownBlog.spiders'</span></span><br><span class="line"></span><br><span class="line">COOKIES_ENABLED = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">	<span class="string">'LogdownBlog.pipelines.LogdownblogspiderPipeline'</span>:<span class="number">300</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-_LogdownSpider-py的编写-爬虫分析部分">5. LogdownSpider.py的编写-爬虫分析部分</h2><p>在 spider 文件夹下新建一个名字为 LogdownSpider.py 的文件，这时目录层次如下：</p>
<figure class="highlight python"><figcaption><span>项目目录层次</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+ LogdownBlog</span><br><span class="line">|  + LogdownBlog</span><br><span class="line">|  |  + spiders</span><br><span class="line">|  |  |  - __init__.py</span><br><span class="line">|  |  |  - LogdownSpider.py</span><br><span class="line">|  |  - __init__.py</span><br><span class="line">|  |  - items.py</span><br><span class="line">|  |  - pipelines.py</span><br><span class="line">|  |  - settings.py</span><br><span class="line">|  - scrapy.cfg</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><figcaption><span>LogdownSpider.py 爬虫代码 </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scrapy.spider <span class="keyword">import</span> Spider</span><br><span class="line"><span class="keyword">from</span> scrapy.http <span class="keyword">import</span> Request</span><br><span class="line"><span class="keyword">from</span> scrapy.selector <span class="keyword">import</span> Selector</span><br><span class="line"><span class="keyword">from</span> LogdownBlog.items <span class="keyword">import</span> LogdownblogspiderItem</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LogdownSpider</span><span class="params">(Spider)</span>:</span></span><br><span class="line">	<span class="string">'''LogdownSpider'''</span></span><br><span class="line"></span><br><span class="line">	name = <span class="string">'LogdownSpider'</span></span><br><span class="line"></span><br><span class="line">	download_delay = <span class="number">1</span></span><br><span class="line">	allowed_domains = [<span class="string">"childhood.logdown.com"</span>]</span><br><span class="line">	</span><br><span class="line">	first_blog_url = raw_input(<span class="string">"请输入您的第一篇博客地址: "</span>)</span><br><span class="line">	start_urls = [</span><br><span class="line">		first_blog_url</span><br><span class="line">	]</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">		sel = Selector(response)</span><br><span class="line">		item = LogdownblogspiderItem()</span><br><span class="line"></span><br><span class="line">		article_name = sel.xpath(<span class="string">'//article[@class="post"]/h2/a/text()'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">		article_url = sel.xpath(<span class="string">'//article[@class="post"]/h2/a/@href'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">		article_time = sel.xpath(<span class="string">'//article[@class="post"]/div[@class="meta"]/div[@class="date"]/time/@datetime'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">		article_tags = sel.xpath(<span class="string">'//article[@class="post"]/div[@class="meta"]/div[@class="tags"]/a/text()'</span>).extract()</span><br><span class="line"></span><br><span class="line">		item[<span class="string">'article_name'</span>] = article_name.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">		item[<span class="string">'article_url'</span>] = article_url.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">		item[<span class="string">'article_time'</span>] = article_time.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">		item[<span class="string">'article_tags'</span>] = [n.encode(<span class="string">'utf-8'</span>) <span class="keyword">for</span> n <span class="keyword">in</span> article_tags]</span><br><span class="line"></span><br><span class="line">		<span class="keyword">yield</span> item</span><br><span class="line"></span><br><span class="line">		<span class="comment"># get next article's url</span></span><br><span class="line">		nextUrl = sel.xpath(<span class="string">'//nav[@id="pagenavi"]/a[@class="next"]/@href'</span>).extract()[<span class="number">0</span>]</span><br><span class="line">		<span class="keyword">print</span> nextUrl</span><br><span class="line">		<span class="keyword">yield</span> Request(nextUrl, callback=self.parse)</span><br></pre></td></tr></table></figure>
<p>有几个点注意下：</p>
<ul>
<li>对 <a href="http://www.w3school.com.cn/xpath/xpath_syntax.asp" target="_blank" rel="external">xpath</a> 的理解要正确，因为直接关系到我们想要的数据在页面html里的提取。</li>
</ul>
<p>对 xpath 的分析当然离不了对 html 的分析，我这里采用了 Chrome 浏览器，通过<strong>右键-审查元素</strong>来查看我们想要的数据在页面中的层次位置。下面以【查看下一篇博文】为例子。</p>
<center><img src="http://childhoodgamedev.qiniudn.com/scrapy_nextArticleUrl2.png"></center>

<p>所以通过 xpath 为<code>&#39;//nav[@id=&quot;pagenavi&quot;]/a[@class=&quot;next&quot;]/@href&#39;</code>就能得到下一篇博文的 url 地址。</p>
<ul>
<li>设置download_delay，减轻服务器的压力，防止被ban。</li>
<li><code>yield Request(nextUrl, callback=self.parse)</code>，获取每个页面的“下一篇博客“的网址返回给引擎，从而循环实现下一个网页的爬取。</li>
</ul>
<h2 id="6-_执行">6. 执行</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl LogdownSpider</span><br></pre></td></tr></table></figure>
<p>截图如文章开头图片所示，格式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">...</span><br><span class="line">&#123;<span class="string">"article_name"</span>: <span class="string">"  PhysicsEditorExporter for QuickCocos2dx 使用说明"</span>, <span class="string">"article_tags"</span>: [<span class="string">"exporter"</span>, <span class="string">"Chipmunk"</span>, <span class="string">"physicseditor"</span>, <span class="string">"quick-x"</span>], <span class="string">"article_url"</span>: <span class="string">"http://childhood.logdown.com/posts/196165/physicseditorexporter-for-quickcocos2dx-instructions-for-use"</span>, <span class="string">"article_time"</span>: <span class="string">"2014-04-28 14:08:00 UTC"</span>&#125;</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h1 id="相关资料查阅"><i class="icon-book"> 相关资料查阅</i></h1><ul>
<li><a href="http://doc.scrapy.org/en/latest/" target="_blank" rel="external">Scrapy官方文档</a></li>
<li><a href="http://scrapy-chs.readthedocs.org/zh_CN/latest/" target="_blank" rel="external">Scrapy中文文档</a>  <a href="https://github.com/marchtea/scrapy_doc_chs" target="_blank" rel="external">Github地址</a></li>
<li><a href="http://blog.csdn.net/column/details/younghz-scrapy.html" target="_blank" rel="external">younghz的Scrapy原创精华教程系列</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/16/solving-git-push-operation-every-time-you-enter-your-account-password-problem/" itemprop="url">
                  解决git push操作每次输入账户密码问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-16T14:53:00+08:00" content="Jul 16 2014">
              Jul 16 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/programming/" itemprop="url" rel="index">
                    <span itemprop="name">programming</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/16/solving-git-push-operation-every-time-you-enter-your-account-password-problem/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/16/solving-git-push-operation-every-time-you-enter-your-account-password-problem/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <center><img src="http://childhoodgamedev.qiniudn.com/git_QQ20140716-3.png"></center>

<p>在命令行操作<code>git push</code>的时候，总是要输入帐号密码，找到了解决方法，做个记录。这里以 github 帐号为例，如果用的 bitbucket 等其他帐号，原理一样。</p>
<h1 id="环境：MacOSX、Linux"><i class="icon-desktop"> 环境：MacOSX、Linux</i></h1><h1 id="步骤"><i class="icon-edit"> 步骤</i></h1><ul>
<li><figure class="highlight"><figcaption><span>.git-credentials```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-  ```vim .git-credentials```&#65292;&#36755;&#20837; `https://&#123;username&#125;:&#123;password&#125;@github.com`&#65292;username &#21644; password &#20998;&#21035;&#26159;&#20320;&#30340;&#36134;&#25143;&#21644;&#23494;&#30721;&#10;-  ```git config --global credential.helper store</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>完毕后重启终端。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/14/easy-magicalrecord-02/" itemprop="url">
                  深入浅出MagicalRecord-02
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-14T11:32:00+08:00" content="Jul 14 2014">
              Jul 14 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ios/" itemprop="url" rel="index">
                    <span itemprop="name">ios</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/14/easy-magicalrecord-02/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/14/easy-magicalrecord-02/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们接着上一篇 <a href="http://childhood.logdown.com/posts/208957/easy-magicalrecord-01" target="_blank" rel="external">深入浅出MagicalRecord-01</a>。</p>
<p>这一节我们一起粗略的了解下 CoreData 中的一些核心概念以及 MagicalRecord 的入门准备。只有对 CoreData 理解深入了，才能更轻松的使用 MagicalRecord。</p>
<h1 id="1-_CoreData_的核心概念"><i class="icon-heart"> 1. CoreData 的核心概念</i></h1><p>先上两幅关键的概念图</p>
<p><img src="http://childhoodgamedev.qiniudn.com/ios_CoreData1.jpeg" alt="概念图1"></p>
<p><img src="http://childhoodgamedev.qiniudn.com/ios_CoreData2.jpeg" alt="概念图2"></p>
<h3 id="(1)NSManagedObjectModel_托管对象模型（MOM）"><i class="icon-comment"> (1)NSManagedObjectModel 托管对象模型（MOM）</i></h3><p><img src="http://childhoodgamedev.qiniudn.com/ios_NSManagedObjectModel.png" alt="托管对象的数据模型"><br><img src="http://childhoodgamedev.qiniudn.com/ios_managed_object_model_2x.png" alt="MOM"></p>
<p>这个MOM由实体描述对象，即<code>NSEntityDescription</code>实例的集合组成，实体描述对象介绍见下面第7条。</p>
<p>作用：添加实体的属性，建立属性之间的关系</p>
<h3 id="(2)NSManagedObjectContext_托管对象上下文（MOC）"><i class="icon-comment"> (2)NSManagedObjectContext 托管对象上下文（MOC）</i></h3><p><img src="http://childhoodgamedev.qiniudn.com/ios_CoreData5.png" alt="托管对象上下文"></p>
<p>在概念图2中，托管对象上下文（MOC）通过持久化存储协调器（PSC）从持久化存储（NSPersistentStore）中获取对象时，这些对象会形成一个临时副本在MOC中形成一个对象集合，该对象集合包含了对象以及对象彼此之间的一些关系。我们可以对这些副本进行修改，然后进行保存，然后MOC会通过 PSC 对 NSPersistentStore 进行操作，持久化存储就会发生变化。</p>
<p>CoreData中的<code>NSManagedObjectModel 托管对象的数据模型（MOM）</code>，通过 MOC 进行注册。MOC有插入、删除以及更新数据模型等操作，并提供了撤销和重做的支持。</p>
<p>作用：插入数据，更新数据，删除数据</p>
<h3 id="(3)NSPersistentStoreCoordinator_持久化存储协调器（PSC）"><i class="icon-comment"> (3)NSPersistentStoreCoordinator 持久化存储协调器（PSC）</i></h3><p><img src="http://childhoodgamedev.qiniudn.com/ios_CoreData6.png" alt="持久化存储协调器"><br><img src="http://childhoodgamedev.qiniudn.com/ios_advanced_persistence_stack_2x.png" alt="持久化堆栈"></p>
<p>在应用程序和外部数据存储的对象之间提供访问通道的框架对象集合统称为持久化堆栈（persistence stack）。在堆栈顶部的是托管对象上下文（MOC），在堆栈底部的是持久化对象存储（persistent object stores）。在托管对象上下文和持久化对象存储之间便是持久化存储协调器（PSC）。应用程序通过类NSPersistentStoreCoordinator的实例访问持久化对象存储。</p>
<p>持久化存储协调器为一或多个托管对象上下文提供一个访问接口，使其下层的多个持久化存储可以表现为单一一个聚合存储。一个托管对象上下文可以基于持久化存储协调器下的所有数据存储来创建一个对象图。持久化存储协调器只能与一个托管对象模型（MOM）相关联。</p>
<h3 id="(4)NSManagedObject_托管对象（MO）"><i class="icon-comment"> (4)NSManagedObject 托管对象（MO）</i></h3><p><img src="http://childhoodgamedev.qiniudn.com/ios_CoreData4.png" alt="托管对象数据记录"></p>
<p>托管对象必须继承自<code>NSManagedObject</code>或者<code>NSManagedObject</code>的子类。NSManagedObject能够表述任何实体。它使用一个私有的内部存储，以维护其属性，并实现托管对象所需的所有基本行为。托管对象有一个指向实体描述的引用。<code>NSEntityDescription 实体描述</code>表述了实体的元数据，包括实体的名称，实体的属性和实体之间的关系。</p>
<h3 id="(5)Controller_控制器"><i class="icon-comment"> (5)Controller 控制器</i></h3><p>概念图1中绿色的 Array Controller，Object Controller，Tree Controller 这些控制器，一般都是通过 control+drag 将 Managed Object Context 绑定到它们，这样我们就可以在 nib 中可视化地操作数据</p>
<h3 id="(6)NSFetchRequest_获取数据请求"><i class="icon-comment"> (6)NSFetchRequest 获取数据请求</i></h3><p>使用托管对象上下文来检索数据时，会创建一个获取请求（fetch request）。类似Sql查询语句的功能。</p>
<h3 id="(7)NSEntityDescription_实体描述"><i class="icon-comment"> (7)NSEntityDescription 实体描述</i></h3><p><img src="http://childhoodgamedev.qiniudn.com/ios_Entity.png" alt="实体描述"></p>
<p>实体描述对象提供了一个实体的元数据，包括实体名（Name），类名（ClassName），属性（Properties）以及实体属性与其他实体的一些关系（Relationships）等。</p>
<h3 id="(8)-xcdatamodeld"><i class="icon-comment"> (8).xcdatamodeld</i></h3><p><img src="http://childhoodgamedev.qiniudn.com/ios_CoreData3.png" alt=""><br><img src="http://childhoodgamedev.qiniudn.com/ios_xcdatamodeld.png" alt=""></p>
<p>里面是.xcdatamodeld文件，用数据模型编辑器编辑，编译后为.momd或.mom文件。</p>
<p>我们可以选中我们的应用程序（路径类似为<code>/Users/Childhood/Library/Application Support/iPhone Simulator/7.1/Applications/005D926F-5763-4305-97FE-AE55FE7281A4</code>），右键显示包内容，我们看到是这样的。</p>
<p><img src="http://childhoodgamedev.qiniudn.com/ios_xcdatamodeld2.png" alt=""></p>
<p>我们着重理解下他们之间的协同工作关系。</p>
<p>这里有一个简单的demo<i class="icon-github"><a href="https://github.com/dabing1022/CoreDataDemo" target="_blank" rel="external">CoreDataDemo</a>。</i></p>
<figure class="highlight c"><figcaption><span>CoreDataDemoSnippet</span><a href="https://gist.github.com/dabing1022/0ce84c7d2882b487f10f" target="_blank" rel="external"><i class="icon-github-alt">Gist地址</i></a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">pragma</span> mark - CoreDataAbout</span></span><br><span class="line"> </span><br><span class="line">- (<span class="keyword">void</span>)saveContext</span><br><span class="line">&#123;</span><br><span class="line">    NSError* error = nil;</span><br><span class="line">    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;</span><br><span class="line">    <span class="keyword">if</span> (managedObjectContext != nil) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([managedObjectContext hasChanges] &amp;&amp; ![managedObjectContext save:&amp;error]) &#123;</span><br><span class="line">            NSLog(@<span class="string">"Unresolved error :%@, %@"</span>, error, [error userInfo]);</span><br><span class="line">            <span class="built_in">abort</span>();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            NSLog(@<span class="string">"save success!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">- (NSURL*)applicationDocDir</span><br><span class="line">&#123;</span><br><span class="line">    NSURL* url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask]lastObject];</span><br><span class="line">    NSLog(@<span class="string">"%@"</span>, [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:<span class="number">0</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> url;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 后缀为.xcdatamodeld的包，里面是.xcdatamodel文件，用数据模型编辑器编辑</span></span><br><span class="line"><span class="comment">// 编译后为.momd或.mom文件</span></span><br><span class="line">- (NSManagedObjectModel*)managedObjectModel</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (_managedObjectModel != nil) &#123;</span><br><span class="line">        <span class="keyword">return</span> _managedObjectModel;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    NSURL* modelURL = [[NSBundle mainBundle] URLForResource:@<span class="string">"Journal"</span> withExtension:@<span class="string">"momd"</span>];</span><br><span class="line">    NSLog(@<span class="string">"model url: %@"</span>, [modelURL path]);</span><br><span class="line">    self.managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> self.managedObjectModel;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">- (NSManagedObjectContext*)managedObjectContext</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (_managedObjectContext != nil) &#123;</span><br><span class="line">        <span class="keyword">return</span> _managedObjectContext;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    NSPersistentStoreCoordinator* coordinator = [self persistentStoreCoordinator];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (coordinator != nil) &#123;</span><br><span class="line">        self.managedObjectContext = [[NSManagedObjectContext alloc]init];</span><br><span class="line">        [self.managedObjectContext setPersistentStoreCoordinator:coordinator];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> self.managedObjectContext;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">- (NSPersistentStoreCoordinator*)persistentStoreCoordinator</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (_persistentStoreCoordinator != nil) &#123;</span><br><span class="line">        <span class="keyword">return</span> _persistentStoreCoordinator;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    NSURL* storeUrl = [[self applicationDocDir] URLByAppendingPathComponent:@<span class="string">"Journal.sqlite"</span>];</span><br><span class="line">    </span><br><span class="line">    NSError* error = nil;</span><br><span class="line">    self.persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (![self.persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:nil error:&amp;error]) &#123;</span><br><span class="line">        NSLog(@<span class="string">"Error: %@, %@"</span>, error, [error userInfo]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> self.persistentStoreCoordinator;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结合图示和代码，我们来看下他们的运作机制（下面参考<a href="http://blog.csdn.net/kesalin/article/details/6739319" target="_blank" rel="external">罗朝辉（飘飘白云）[Cocoa]深入浅出 Cocoa 之 Core Data（1）- 框架详解</a>)</p>
<ul>
<li>应用程序先创建或读取模型文件（后缀为xcdatamodeld）生成 NSManagedObjectModel 对象。</li>
<li>生成 NSManagedObjectContext 和 NSPersistentStoreCoordinator 对象，MOC会设置自身的持久化存储协调器(PSC)，通过PSC来对数据文件进行读写。</li>
<li>NSPersistentStoreCoordinator 负责从数据文件(xml，sqlite，二进制文件等)中读取数据生成 Managed Object，或保存 Managed Object 写入数据文件。</li>
<li>NSManagedObjectContext 参与对数据进行各种操作的整个过程，它可以持有多个 Managed Object。我们通过它来监测 Managed Object。监测数据对象有两个作用：支持 undo/redo 以及数据绑定。</li>
<li>Array Controller，Object Controller，Tree Controller 这些控制器一般与 NSManagedObjectContext 关联，因此我们可以通过它们在 nib 中可视化地操作数据对象</li>
</ul>
<h1 id="2-_MagicalRecord的入门准备"><i class="icon-heart"> 2. MagicalRecord的入门准备</i></h1><p>如上篇提到的，在工程的PCH预编译头文件中导入<code>CoreData+MagicalRecord.h</code>文件。因为该头文件包括了所有需要的MagicalRecord头文件。</p>
<p>在我们的app delegate中，或者在<code>awakeFromNib</code>中都可以，我们可以使用下列的方法来设置CoreData堆栈。</p>
<figure class="highlight c"><figcaption><span>setup系列方法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>) setupCoreDataStack;</span><br><span class="line">+ (<span class="keyword">void</span>) setupAutoMigratingCoreDataStack;</span><br><span class="line">+ (<span class="keyword">void</span>) setupCoreDataStackWithInMemoryStore;</span><br><span class="line">+ (<span class="keyword">void</span>) setupCoreDataStackWithStoreNamed:(NSString *)storeName;</span><br><span class="line">+ (<span class="keyword">void</span>) setupCoreDataStackWithAutoMigratingSqliteStoreNamed:(NSString *)storeName;</span><br></pre></td></tr></table></figure>
<p>通过调用上面的方法，我们就可以实例化一块CoreData堆栈，并且为该实例提供 getter 和 setter 方法。</p>
<p>需要注意的一点是，当我们的编译器在 DEBUG 模式下（DEBUG的flag为1），如果改变了定义的数据模型而没有创建新的数据模型，那么 MagicalRecord 则会删除老的存储并且会自动创建一份新的，不用在每次改变的时候进行卸载/重新安装。</p>
<p>在我们的app退出时，我们可以使用下面这个方法来做清理工作。</p>
<figure class="highlight c"><figcaption><span>cleanUp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[MagicalRecord cleanUp];</span><br></pre></td></tr></table></figure>
<h1 id="3-_参考学习"><i class="icon-book"> 3. 参考学习</i></h1><ul>
<li><a href="https://github.com/magicalpanda/MagicalRecord/blob/develop/Docs/GettingStarted.md" target="_blank" rel="external">MagicalRecord的官方资料</a></li>
<li><a href="http://cocoadevcentral.com/articles/000086.php" target="_blank" rel="external">CoreDataClassOverview</a></li>
<li><a href="http://www.cnblogs.com/xiaodao/archive/2012/10/08/2715477.html" target="_blank" rel="external">iphone数据存储之 – Core Data的使用</a></li>
<li><a href="http://blog.csdn.net/kesalin/article/details/6739319" target="_blank" rel="external">[Cocoa]深入浅出 Cocoa 之 Core Data（1）- 框架详解</a></li>
</ul>
<center>下一篇：<a href="http://childhood.logdown.com/posts/211016/easy-magicalrecord-03" target="_blank" rel="external">深入浅出MagicalRecord-03</a></center>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/10/easy-magicalrecord-01/" itemprop="url">
                  深入浅出MagicalRecord-01
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-10T02:10:00+08:00" content="Jul 10 2014">
              Jul 10 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ios/" itemprop="url" rel="index">
                    <span itemprop="name">ios</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/10/easy-magicalrecord-01/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/10/easy-magicalrecord-01/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>《深入浅出MagicalRecord》我准备做成一个系列，记录我从0开始学习这个框架的所有心得、记录。希望能和大家一起探讨交流。</p>
<ol>
<li><a href="http://childhood.logdown.com/posts/208957/easy-magicalrecord-01" target="_blank" rel="external">深入浅出MagicalRecord-01</a></li>
<li><a href="http://childhood.logdown.com/posts/209933/easy-magicalrecord-02" target="_blank" rel="external">深入浅出MagicalRecord-02</a></li>
<li><a href="http://childhood.logdown.com/posts/211016/easy-magicalrecord-03" target="_blank" rel="external">深入浅出MagicalRecord-03</a></li>
<li><a href="http://childhood.logdown.com/posts/211076/easy-magicalrecord-04" target="_blank" rel="external">深入浅出MagicalRecord-04</a></li>
</ol>
</blockquote>
<p>============================</p>
<h1 id="1-_CoreData与MagicalRecord"><i class="icon-pencil"></i> 1. CoreData与MagicalRecord</h1><p>在 ios 开发中，我们会使用CoreData来进行数据持久化。但是在使用CoreData进行存取等操作时，代码量相对较多。而 MagicalRecord 正是为方便操作 CoreData 而生。</p>
<p>MagicalRecord 的三个目标：</p>
<ul>
<li>简化 CoreData 相关代码</li>
<li>清晰、简单、单行获取数据</li>
<li>当需要优化请求的时候，仍然允许修改 NSFetchRequest</li>
</ul>
<p>###<i class="icon-github icon-2x"></i><a href="https://github.com/magicalpanda/MagicalRecord" target="_blank" rel="external">MagicalRecord-Github地址</a></p>
<p>============================</p>
<h1 id="2-_安装配置"><i class="icon-cogs"></i> 2. 安装配置</h1><h3 id="方法1："><i class="icon-pushpin"></i> 方法1：</h3><p>1.从github上下载MagicalRecord源码 <i class="icon-github"></i>[MagicalRecord-Github地址](<a href="https://github.com/magicalpanda/MagicalRecord）。" target="_blank" rel="external">https://github.com/magicalpanda/MagicalRecord）。</a></p>
<p>2.将<code>MagicalRecord</code>文件夹拖放并添加到Xcode项目中。</p>
<p>3.添加 CoreData.framework。</p>
<p><img src="http://childhoodgamedev.qiniudn.com/ios_QQ20140710-1.png" alt=""></p>
<p>4.在项目的预编译头文件中（PCH）中导入<code>CoreData+MagicalRecord.h</code>。或者在将要使用的类中单独导入。</p>
<p>5.开始编码。</p>
<h3 id="方法2："><i class="icon-pushpin"></i> 方法2：</h3><p>1.如果已经安装了CocoaPods（不清楚CocoaPods使用的朋友们可以看唐巧的这篇<a href="http://blog.devtang.com/blog/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/" target="_blank" rel="external">用CocoaPods做iOS程序的依赖管理</a>）。</p>
<p>在终端中输入<code>pod search MagicalRecord</code>，结果如下：</p>
<p><img src="http://childhoodgamedev.qiniudn.com/ios_QQ20140710-2.png" alt=""></p>
<p>复制<code>pod &#39;MagicalRecord&#39;, &#39;~&gt; 2.2&#39;</code>到项目中的Podfile并保存文件。命令行cd到工程根目录下，并执行<code>pod install</code>。</p>
<p>2.以下步骤同方法1的3、4、5步骤。</p>
<blockquote>
<p>注意：<br>如果你在使用 MagicalRecord 方法的时候不想带前缀MR_（比如用 findAll 代替 MR_findAll），只需在PCH文件中，在<code>CoreData+MagicalRecord.h</code>之前增加<code>#defin MR_SHORTHAND</code>即可。</p>
</blockquote>
<p>============================</p>
<h1 id="3-_环境需求"><i class="icon-umbrella"></i> 3. 环境需求</h1><ul>
<li>iOS SDK 6.x 及以上</li>
<li>OS X SDK 10.8 及以上</li>
<li>使用Xcode5来运行github仓库中包含的测试Tests，但MagicalRecord库建立在Xcode4上。</li>
</ul>
<center>下一篇：<a href="http://childhood.logdown.com/posts/209933/easy-magicalrecord-02" target="_blank" rel="external">深入浅出MagicalRecord-02</a></center>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/07/ios-automatically-save-pictures-to-a-photo-album/" itemprop="url">
                  IOS拍照自动保存到相簿
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-07T08:14:00+08:00" content="Jul 7 2014">
              Jul 7 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ios/" itemprop="url" rel="index">
                    <span itemprop="name">ios</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/07/ios-automatically-save-pictures-to-a-photo-album/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/07/ios-automatically-save-pictures-to-a-photo-album/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Github项目地址"><i class="icon-github icon-2x"></i><a href="https://github.com/dabing1022/PhotoPicker" target="_blank" rel="external">Github项目地址</a></h1><p>================</p>
<p><img src="http://childhoodgamedev.qiniudn.com/ios_01.PNG" alt=""><br><img src="http://childhoodgamedev.qiniudn.com/ios_02.PNG" alt=""></p>
<p>项目来自于苹果官方文档中的一个范例。</p>
<p>针对这个范例，我对一些英文注释做了中文说明，并尝试着加入自动保存到相簿的这个小功能。好吧，有些过于简单了。</p>
<figure class="highlight c"><figcaption><span>保存到相簿</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当从相册里选择一张照片或者用相机进行拍摄之后，该方法被调用</span></span><br><span class="line">- (<span class="keyword">void</span>)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info</span><br><span class="line">&#123;</span><br><span class="line">    UIImage *image = [info valueForKey:UIImagePickerControllerOriginalImage];</span><br><span class="line">    NSLog(@<span class="string">"SMILE!"</span>);</span><br><span class="line">    [self.capturedImages addObject:image];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ([self.cameraTimer isValid])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (self.imagePickerController.sourceType == UIImagePickerControllerSourceTypeCamera)</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    [self finishAndUpdate];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)image:(UIImage*)image didFinishSavingWithError:(NSError*)error contextInfo:(<span class="keyword">void</span>*)contextInfo</span><br><span class="line">&#123;</span><br><span class="line">    UIAlertView *alert;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (error)</span><br><span class="line">    &#123;</span><br><span class="line">        alert = [[UIAlertView alloc] initWithTitle:@<span class="string">"错误"</span></span><br><span class="line">                                           message:@<span class="string">"保存失败"</span></span><br><span class="line">                                          delegate:self cancelButtonTitle:@<span class="string">"确定"</span></span><br><span class="line">                                 otherButtonTitles:nil];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        alert = [[UIAlertView alloc] initWithTitle:@<span class="string">"成功"</span></span><br><span class="line">                                           message:@<span class="string">"保存成功"</span></span><br><span class="line">                                          delegate:self cancelButtonTitle:@<span class="string">"确定"</span></span><br><span class="line">                                 otherButtonTitles:nil];</span><br><span class="line">    &#125;</span><br><span class="line">    [alert show];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="后面要加入的功能">后面要加入的功能</h1><ul>
<li>将拍照的照片存储到应用沙盒中</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/05/collection-of-python-google-search-keywords/" itemprop="url">
                  Python之数据采集google搜索联想词
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-05T14:03:00+08:00" content="Jul 5 2014">
              Jul 5 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/05/collection-of-python-google-search-keywords/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/05/collection-of-python-google-search-keywords/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是一个我在业余时间学习python的一个小练习，纯属新手，有不对的地方，还恳朋友们留言指出。</p>
<h1 id="1-_Google搜索"><i class="icon-heart"></i> 1. Google搜索</h1><p>当我们在google搜索引擎中输入关键字的时候，会实时弹出一些联想提示短语的列表。这篇文章想通过python做这样一个数据采集的工作。我们使用 Chrome 浏览器来分析下。（Google服务被GFW禁掉，我采用了VPN。）</p>
<center><b>第一步【输入关键字】</b></center><br><center><img src="http://childhoodgamedev.qiniudn.com/python_QQ20140705-1.png"></center>

<center><b>第二步【Chrome浏览器开发者工具打开网络标签查看】</b></center><br><center><img src="http://childhoodgamedev.qiniudn.com/python_QQ20140705-3.png"></center>

<center><b>第三步【查看返回Preview/Response】</b></center><br><center><img src="http://childhoodgamedev.qiniudn.com/python_QQ20140705-2.png"></center>

<h1 id="2-_代码思路_Github"><i class="icon-heart"></i> 2. 代码思路 <i class="icon-github"></i><a href="https://github.com/dabing1022/Blog/blob/master/python/e026.py" target="_blank" rel="external">Github</a></h1><p>这里随便选择了三个关键字，分别是<code>love</code>，<code>like</code>，<code>hate</code>。</p>
<figure class="highlight python"><figcaption><span>Python之数据采集google搜索联想词</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A demo to show how to collect the suggestion words when we search with search engine </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</span><br><span class="line"></span><br><span class="line">wordsSearchingList = [<span class="string">'love'</span>, <span class="string">'like'</span>, <span class="string">'hate'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> wordsSearchingList:</span><br><span class="line">	keyWord = urllib.quote(item)</span><br><span class="line"></span><br><span class="line">	url = <span class="string">'https://www.google.co.jp/complete/search?client=hp&amp;hl=zh-CN&amp;gs_rn=48&amp;gs_ri=hp&amp;tok=9rRotU-cEDUkHKHgOoZAZw&amp;cp=4&amp;gs_id=je&amp;q=%s&amp;xhr=t'</span> % (keyWord)</span><br><span class="line"><span class="comment"># 填写Request Headers，防止被ban掉</span></span><br><span class="line">	headers = &#123;</span><br><span class="line">		<span class="string">"GET"</span>: url,</span><br><span class="line">		<span class="string">"Host"</span>: <span class="string">"www.google.co.jp"</span>,</span><br><span class="line">		<span class="string">"Referer"</span>: <span class="string">"https://www.google.co.jp/"</span>,</span><br><span class="line">		<span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.114 Safari/537.36"</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	req = urllib2.Request(url)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> key <span class="keyword">in</span> headers:</span><br><span class="line">		req.add_header(key, headers[key])</span><br><span class="line"></span><br><span class="line">	html = urllib2.urlopen(req).read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 正则匹配</span></span><br><span class="line">	pattern = re.compile(<span class="string">r'"(&#123;searchWord&#125;.*?)"'</span>.format(searchWord = keyWord))</span><br><span class="line">	results = pattern.findall(html)</span><br><span class="line">	<span class="keyword">for</span> item <span class="keyword">in</span> results:</span><br><span class="line">		<span class="keyword">print</span> item</span><br><span class="line">	time.sleep(<span class="number">1</span>)</span><br><span class="line">	<span class="keyword">print</span> <span class="string">'-------------------------------------'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>输出结果</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">love</span><br><span class="line">love tv show</span><br><span class="line">love</span><br><span class="line">love story</span><br><span class="line">love the way you lie</span><br><span class="line">love is an open door</span><br><span class="line">love moschino</span><br><span class="line">love never felt so good</span><br><span class="line">loveq</span><br><span class="line">love live 第二季</span><br><span class="line">love actually</span><br><span class="line">-------------------------------------</span><br><span class="line">like</span><br><span class="line">likert scale</span><br><span class="line">likelihood ratio test</span><br><span class="line">-------------------------------------</span><br><span class="line">hate</span><br><span class="line">hater snapback</span><br><span class="line">hater帽子</span><br><span class="line">hateoas</span><br><span class="line">hater snapback uk</span><br><span class="line">hate crime</span><br><span class="line">hate speech</span><br><span class="line">hateship loveship</span><br><span class="line">haters gonna hate</span><br><span class="line">hate什么意思</span><br><span class="line">hater uk</span><br><span class="line">-------------------------------------</span><br><span class="line">[Finished <span class="keyword">in</span> <span class="number">5.0</span>s]</span><br></pre></td></tr></table></figure>
<h1 id="3-_存在问题"><i class="icon-heart"></i> 3. 存在问题</h1><p>正则匹配我用的是<code>pattern = re.compile(r&#39;&quot;({searchWord}.*?)&quot;&#39;.format(searchWord = keyWord))</code>，会匹配出类似<code>&quot;love story&quot;</code>，<code>&quot;love live 第二季&quot;</code>这样以<code>love</code>开头，并被双引号包围的短语。但这样会导致下面这个问题：</p>
<center><i class="icon-hand-right"></i><em>like 的联想词中其实是有中文联想的，但由于该正则表达式的问题，只显示了英文。</em></center>

<p>这个仍然有待改进。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/04/recommend-a-free-easy-to-use-tomatoes-work-under-mac-software/" itemprop="url">
                  推荐一款Mac下免费好用的番茄工作法软件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-04T07:41:00+08:00" content="Jul 4 2014">
              Jul 4 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/life/" itemprop="url" rel="index">
                    <span itemprop="name">life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/04/recommend-a-free-easy-to-use-tomatoes-work-under-mac-software/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/04/recommend-a-free-easy-to-use-tomatoes-work-under-mac-software/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>番茄工作法是一个非常有效的工作方法，不了解的朋友<a href="http://baike.baidu.com/link?url=lMm6uLHBwDis6xWGUvSn0rNr-TE7RMSDF348jmCCmByoDL1V2s5MAHwSugJaaxJFxUSYPmcNRUTSRtDunhyQgq" target="_blank" rel="external">点击这里看百科介绍</a>。</p>
<p>今天为大家推荐一款 Mac 下免费好用的番茄工作法软件</p>
<h2 id="focus_booster"><a href="http://www.focusboosterapp.com" target="_blank" rel="external">focus booster</a></h2><p>这款软件的界面很清爽，相信你会喜欢上TA。使用起来也很简单，不用看什么帮助。基本上，25分钟 的工作时间，5分钟 的休息时间，当然这两个时间可以视个人情况进行调整。不过 25分钟 和 5分钟 是一个比较科学合理的时间，过长过短都不太好，推荐使用默认设置。</p>
<p><img src="http://childhoodgamedev.qiniudn.com/fanqie_QQ20140704-1.png" alt=""></p>
<p><img src="http://childhoodgamedev.qiniudn.com/fanqie_QQ20140704-2.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/07/03/ios-access-device-information-summary-of-commonly-used-methods/" itemprop="url">
                  IOS获取设备信息常用方法记录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-07-03T08:36:00+08:00" content="Jul 3 2014">
              Jul 3 2014
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ios/" itemprop="url" rel="index">
                    <span itemprop="name">ios</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/07/03/ios-access-device-information-summary-of-commonly-used-methods/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/07/03/ios-access-device-information-summary-of-commonly-used-methods/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-_常用方法_GithubGist地址">1. 常用方法 <a href="https://gist.github.com/dabing1022/55ce189c87c0b752f7c6" target="_blank" rel="external">GithubGist地址</a></h1><figure class="highlight c"><figcaption><span>常用方法</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">    NSLog(@<span class="string">"HostName: %@"</span>, [[NSProcessInfo processInfo] hostName]);</span><br><span class="line">    <span class="comment">//globallyUniqueString 唯一的标示符，每次调用都会不一样，可以用作一些临时缓存文件的名字</span></span><br><span class="line">    NSLog(@<span class="string">"GlobalUniqueString: %@"</span>, [[NSProcessInfo processInfo] globallyUniqueString]);</span><br><span class="line">    <span class="comment">//操作系统名称</span></span><br><span class="line">    NSLog(@<span class="string">"OperatingSystemName: %@"</span>, [[NSProcessInfo processInfo] operatingSystemName]);</span><br><span class="line">    <span class="comment">//操作系统版本</span></span><br><span class="line">    NSLog(@<span class="string">"OperatingSystemVersion: %@"</span>, [[NSProcessInfo processInfo] operatingSystemVersionString]);</span><br><span class="line">    <span class="comment">//物理内存</span></span><br><span class="line">    NSLog(@<span class="string">"PhysicalMem: %llu"</span>, [[NSProcessInfo processInfo] physicalMemory]);</span><br><span class="line">    <span class="comment">//进程名称</span></span><br><span class="line">    NSLog(@<span class="string">"ProcessName: %@"</span>, [[NSProcessInfo processInfo] processName]);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//供应商标识</span></span><br><span class="line">    NSLog(@<span class="string">"UniqueId: %@"</span>, [UIDevice currentDevice].identifierForVendor);</span><br><span class="line">    <span class="comment">//设备类型（iPhone、iPad）</span></span><br><span class="line">    NSLog(@<span class="string">"userInterfaceIdiom: %d"</span>, [UIDevice currentDevice].userInterfaceIdiom);</span><br><span class="line">    <span class="comment">//设备名字</span></span><br><span class="line">    NSLog(@<span class="string">"Name: %@"</span>, [UIDevice currentDevice].name);</span><br><span class="line">    <span class="comment">//系统名字</span></span><br><span class="line">    NSLog(@<span class="string">"SystemName: %@"</span>, [UIDevice currentDevice].systemName);</span><br><span class="line">    <span class="comment">//系统版本</span></span><br><span class="line">    NSLog(@<span class="string">"SystemVersion: %@"</span>, [UIDevice currentDevice].systemVersion);</span><br><span class="line">    <span class="comment">//模型</span></span><br><span class="line">    NSLog(@<span class="string">"Model: %@"</span>, [UIDevice currentDevice].model);</span><br><span class="line">    <span class="comment">//本地化的模型</span></span><br><span class="line">    NSLog(@<span class="string">"LocalizeModel: %@"</span>, [UIDevice currentDevice].localizedModel);</span><br><span class="line">    <span class="comment">//电池状态</span></span><br><span class="line">    NSLog(@<span class="string">"BatteryLevel: %f"</span>, [UIDevice currentDevice].batteryLevel);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.055 CityOfHeart[3528:60b] HostName: dounen</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.058 CityOfHeart[3528:60b] GlobalUniqueString: B4B1EC8C-A805-434B-9D57-106ED70C214A-3528-00000AF6A42D73D7</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.059 CityOfHeart[3528:60b] OperatingSystemName: NSMACHOperatingSystem</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.061 CityOfHeart[3528:60b] OperatingSystemVersion: Version 7.1.1 (Build 11D201)</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.063 CityOfHeart[3528:60b] PhysicalMem: 1035976704</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.064 CityOfHeart[3528:60b] ProcessName: CityOfHeart</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.074 CityOfHeart[3528:60b] UniqueId: &lt;__NSConcreteUUID 0x16693c80&gt; 5ACF8DA1-FAC1-4D70-AB1F-BB696188C5CA</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.075 CityOfHeart[3528:60b] userInterfaceIdiom: 0</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.157 CityOfHeart[3528:60b] Name: 童年</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.159 CityOfHeart[3528:60b] SystemName: iPhone OS</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.161 CityOfHeart[3528:60b] SystemVersion: 7.1.1</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.162 CityOfHeart[3528:60b] Model: iPad</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.163 CityOfHeart[3528:60b] LocalizeModel: iPad</span></span><br><span class="line"><span class="comment">//2014-07-03 16:52:01.165 CityOfHeart[3528:60b] BatteryLevel: -1.000000</span></span><br></pre></td></tr></table></figure>
<h1 id="2-_判断设备是否是7-0以上系统">2. 判断设备是否是7.0以上系统</h1><p><code>[[[UIDevice currentDevice] systemVersion] floatValue] &gt;= 7.0f</code></p>
<blockquote>
<p>注意：<br>假如我们的设备版本号为<code>7.1.1</code>（为字符串类型），对其进行<code>floatValue</code>浮点化后值为<code>7.100000</code>。</p>
</blockquote>
<h1 id="3-_判断设备是否是iPhone、iPad">3. 判断设备是否是iPhone、iPad</h1><ul>
<li>iPad：<code>[[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad</code></li>
<li>iPhone: <code>[[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone</code></li>
</ul>
<figure class="highlight c"><figcaption><span>UIUserInterfaceIdiom in UIDevice.h</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">NS_ENUM</span><span class="params">(NSInteger, UIUserInterfaceIdiom)</span> </span>&#123;</span><br><span class="line"><span class="preprocessor">#<span class="keyword">if</span> __IPHONE_3_2 &lt;= __IPHONE_OS_VERSION_MAX_ALLOWED</span></span><br><span class="line">    UIUserInterfaceIdiomPhone,           <span class="comment">// iPhone and iPod touch style UI</span></span><br><span class="line">    UIUserInterfaceIdiomPad,             <span class="comment">// iPad style UI</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="ChildhoodAndy" />
          <p class="site-author-name" itemprop="name">ChildhoodAndy</p>
          <p class="site-description motion-element" itemprop="description">思维世界的发展，在某种意义上说，就是对惊奇的不断摆脱。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">56</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">111</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://www.github.com/dabing1022" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/childhoodandy" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/1297984304" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/users/1986621" target="_blank" title="StackOverflow">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  StackOverflow
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友链
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://zengrong.net/" title="曾嵘" target="_blank">曾嵘</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://post.justbilt.com/" title="justblit" target="_blank">justblit</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://yulingtianxia.com" title="玉令天下" target="_blank">玉令天下</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://mokai.github.io" title="mokai" target="_blank">mokai</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://theme-next.iissnan.com/" title="NexT-Help" target="_blank">NexT-Help</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.ibireme.com/" title="ibireme" target="_blank">ibireme</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ChildhoodAndy</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"ChildhoodAndy"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  






  
  
  

  

  

</body>
</html>
